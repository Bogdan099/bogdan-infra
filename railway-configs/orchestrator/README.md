# Orchestrator Service - Railway Deployment

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –¥–µ–ø–ª–æ—è orchestrator —Å–µ—Ä–≤–∏—Å–∞ –Ω–∞ Railway –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ.

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞

```
orchestrator/
‚îú‚îÄ‚îÄ railway.json     # Railway –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile       # Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
‚îú‚îÄ‚îÄ .env.example     # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îî‚îÄ‚îÄ README.md        # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üöÄ –î–µ–ø–ª–æ–π

### 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Railway CLI:
```bash
npm install -g @railway/cli
```

–í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç:
```bash
railway login
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ Railway:
```bash
railway variables set DATABASE_URL="your-postgres-url"
railway variables set JWT_SECRET="your-jwt-secret"
railway variables set API_KEY="your-api-key"
# ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
```

### 3. –î–µ–ø–ª–æ–π —Å–µ—Ä–≤–∏—Å–∞

```bash
# –ù–∞—Ö–æ–¥—è—Å—å –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ railway-configs/orchestrator/
railway deploy
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
railway status
railway logs
```

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

### –û—Å–Ω–æ–≤–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

- `DATABASE_URL` - PostgreSQL —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- `REDIS_URL` - Redis –¥–ª—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è  
- `JWT_SECRET` - –°–µ–∫—Ä–µ—Ç –¥–ª—è JWT —Ç–æ–∫–µ–Ω–æ–≤
- `API_KEY` - API –∫–ª—é—á —Å–µ—Ä–≤–∏—Å–∞

### –ü–æ—Ä—Ç—ã:

- **8000** - HTTP API —Å–µ—Ä–≤–µ—Ä
- Health check: `GET /health`

### –†–µ—Å—É—Ä—Å—ã:

- 1 —Ä–µ–ø–ª–∏–∫–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ—Å—Ç–∞—Ä—Ç –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- Health check –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥

## üîß –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

```bash
# –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞
docker build -t orchestrator .

# –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
docker run -p 8000:8000 --env-file .env orchestrator
```

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- Health endpoint: `http://localhost:8000/health`
- –õ–æ–≥–∏: `railway logs`
- –ú–µ—Ç—Ä–∏–∫–∏: –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ Sentry (SENTRY_DSN)

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

1. **–°–µ—Ä–≤–∏—Å –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ `railway logs`
2. **Health check fails**: —É–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ `/health` endpoint –¥–æ—Å—Ç—É–ø–µ–Ω
3. **Database connection**: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ `DATABASE_URL`